/*! For license information please see 268.e5711491.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkgutsafe_app=self.webpackChunkgutsafe_app||[]).push([[268],{7268:(e,t,o)=>{o.r(t),o.d(t,{ScanHistoryScreen:()=>D});var n=o(5043),a=o(1081),i=o(759),r=o(9426),l=o(1695),s=o(7169),d=o(7416),c=o(3523),m=o(6925),y=o(9366),f=o(4907),g=o(2316),x=o(3692),u=o(9132),h=o(8449),p=o(6267),S=o(7944),b=o(3942),z=o(4459),A=o(1685),j=o(9379),v=o(3887),w=o(9155),C=o(8414),F=o(579);"android"===v.A.OS&&w.A.setLayoutAnimationEnabledExperimental&&w.A.setLayoutAnimationEnabledExperimental(!0);const B=e=>{let{scanHistory:t,onPress:o,onExpand:i,expanded:r=!1,showFullDetails:l=!1}=e;const m="dark"===(0,a.A)()?b.J.dark:b.J.light,[f,g]=(0,n.useState)(r),x=(0,n.useRef)(new y.A.Value(0)).current,{foodItem:u,analysis:h,timestamp:p}=t,{overallSafety:S,flaggedIngredients:z,safeAlternatives:A,explanation:j,dataSource:v}=h,w=e=>{switch(e){case"mild":return b.J.safe;case"moderate":return b.J.caution;case"severe":return b.J.avoid}},B=e=>{switch(e){case"mild":return"\ud83d\udfe2";case"moderate":return"\ud83d\udfe1";case"severe":return"\ud83d\udd34"}},K=(()=>{switch(S){case"safe":return{color:b.J.safe,icon:"\u2705",backgroundColor:"".concat(b.J.safe,"15"),title:"Safe to Eat"};case"caution":return{color:b.J.caution,icon:"\u26a0\ufe0f",backgroundColor:"".concat(b.J.caution,"15"),title:"Use Caution"};case"avoid":return{color:b.J.avoid,icon:"\u274c",backgroundColor:"".concat(b.J.avoid,"15"),title:"Avoid"}}})();if(!K)return null;const k=x.interpolate({inputRange:[0,1],outputRange:["0deg","90deg"]});return(0,F.jsxs)(d.A,{style:[I.card,{backgroundColor:m.surface}],onPress:o,activeOpacity:.7,children:[(0,F.jsxs)(s.A,{style:I.header,children:[(0,F.jsxs)(s.A,{style:I.titleRow,children:[(0,F.jsx)(c.A,{style:I.icon,children:K.icon}),(0,F.jsxs)(s.A,{style:I.titleContainer,children:[(0,F.jsx)(c.A,{style:[I.foodName,{color:m.text}],children:u.name}),(0,F.jsx)(c.A,{style:[I.timestamp,{color:m.textSecondary}],children:(e=>{const t=new Date,o=Math.floor((t.getTime()-e.getTime())/36e5);if(o<1)return"Just now";if(o<24)return"".concat(o,"h ago");{const e=Math.floor(o/24);return"".concat(e,"d ago")}})(p)})]})]}),(0,F.jsxs)(s.A,{style:I.rightSection,children:[(0,F.jsx)(s.A,{style:[I.resultBadge,{backgroundColor:K.backgroundColor}],children:(0,F.jsx)(c.A,{style:[I.resultText,{color:K.color}],children:K.title})}),(0,F.jsx)(d.A,{onPress:()=>{C.A.configureNext(C.A.Presets.easeInEaseOut),g(!f),y.A.timing(x,{toValue:f?0:1,duration:200,useNativeDriver:!0}).start(),null===i||void 0===i||i()},style:I.expandButton,children:(0,F.jsx)(y.A.Text,{style:[I.chevron,{color:m.textSecondary,transform:[{rotate:k}]}],children:"\u203a"})})]})]}),(0,F.jsxs)(s.A,{style:I.basicInfo,children:[(0,F.jsxs)(s.A,{style:I.confidenceRow,children:[(0,F.jsx)(c.A,{style:[I.confidenceLabel,{color:m.textSecondary}],children:"Data Source"}),(0,F.jsx)(c.A,{style:[I.confidenceValue,{color:m.text}],children:v})]}),u.brand&&(0,F.jsx)(c.A,{style:[I.brand,{color:m.textSecondary}],children:u.brand}),(0,F.jsxs)(c.A,{style:[I.dataSource,{color:m.textTertiary}],children:["Source: ",v]})]}),f&&(0,F.jsxs)(s.A,{style:I.expandedContent,children:[(0,F.jsxs)(s.A,{style:I.section,children:[(0,F.jsx)(c.A,{style:[I.sectionTitle,{color:m.text}],children:"Analysis"}),(0,F.jsx)(c.A,{style:[I.explanation,{color:m.textSecondary}],children:j})]}),z.length>0&&(0,F.jsxs)(s.A,{style:I.section,children:[(0,F.jsxs)(c.A,{style:[I.sectionTitle,{color:m.text}],children:["Flagged Ingredients (",z.length,")"]}),z.map((e,t)=>(0,F.jsxs)(s.A,{style:I.ingredientItem,children:[(0,F.jsxs)(s.A,{style:I.ingredientHeader,children:[(0,F.jsx)(c.A,{style:I.severityIcon,children:B(e.severity)}),(0,F.jsx)(c.A,{style:[I.ingredientName,{color:m.text}],children:e.ingredient}),(0,F.jsx)(s.A,{style:[I.severityBadge,{backgroundColor:"".concat(w(e.severity),"20")}],children:(0,F.jsx)(c.A,{style:[I.severityText,{color:w(e.severity)}],children:e.severity})})]}),(0,F.jsx)(c.A,{style:[I.ingredientReason,{color:m.textSecondary}],children:e.reason}),(0,F.jsxs)(c.A,{style:[I.conditionText,{color:m.textTertiary}],children:["Affects: ",e.condition]})]},t))]}),A.length>0&&(0,F.jsxs)(s.A,{style:I.section,children:[(0,F.jsx)(c.A,{style:[I.sectionTitle,{color:m.text}],children:"Safe Alternatives"}),(0,F.jsx)(s.A,{style:I.alternativesList,children:A.map((e,t)=>(0,F.jsxs)(s.A,{style:[I.alternativeItem,{backgroundColor:m.background}],children:[(0,F.jsx)(c.A,{style:I.alternativeIcon,children:"\u2705"}),(0,F.jsx)(c.A,{style:[I.alternativeText,{color:m.text}],children:e})]},t))})]}),(0,F.jsxs)(s.A,{style:I.section,children:[(0,F.jsx)(c.A,{style:[I.sectionTitle,{color:m.text}],children:"Food Details"}),(0,F.jsxs)(s.A,{style:I.foodDetails,children:[u.category&&(0,F.jsxs)(s.A,{style:I.detailRow,children:[(0,F.jsx)(c.A,{style:[I.detailLabel,{color:m.textSecondary}],children:"Category"}),(0,F.jsx)(c.A,{style:[I.detailValue,{color:m.text}],children:u.category})]}),u.histamineLevel&&(0,F.jsxs)(s.A,{style:I.detailRow,children:[(0,F.jsx)(c.A,{style:[I.detailLabel,{color:m.textSecondary}],children:"Histamine Level"}),(0,F.jsx)(c.A,{style:[I.detailValue,{color:m.text}],children:u.histamineLevel})]})]})]})]})]})},I=h.A.create({card:(0,j.A)({marginHorizontal:A.Kz.lg,marginBottom:A.Kz.sm,borderRadius:12,padding:A.Kz.md},"web"===v.A.OS?{boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}:{shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:2}),header:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",marginBottom:A.Kz.sm},titleRow:{flexDirection:"row",alignItems:"flex-start",flex:1},icon:{fontSize:20,marginRight:A.Kz.sm,marginTop:2},titleContainer:{flex:1},foodName:{fontSize:z.o.fontSize.body,fontFamily:z.o.fontFamily.semiBold,marginBottom:2},timestamp:{fontSize:z.o.fontSize.caption,fontFamily:z.o.fontFamily.regular},rightSection:{alignItems:"flex-end"},resultBadge:{paddingHorizontal:A.Kz.sm,paddingVertical:A.Kz.xs,borderRadius:8,marginBottom:A.Kz.xs},resultText:{fontSize:z.o.fontSize.caption,fontFamily:z.o.fontFamily.semiBold},expandButton:{padding:A.Kz.xs},chevron:{fontSize:16,fontWeight:"300"},basicInfo:{marginBottom:A.Kz.sm},confidenceRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:A.Kz.xs},confidenceLabel:{fontSize:z.o.fontSize.caption,fontFamily:z.o.fontFamily.regular},confidenceValue:{fontSize:z.o.fontSize.bodySmall,fontFamily:z.o.fontFamily.semiBold},brand:{fontSize:z.o.fontSize.caption,fontFamily:z.o.fontFamily.regular},dataSource:{fontSize:z.o.fontSize.caption,fontFamily:z.o.fontFamily.regular,marginTop:2},expandedContent:{marginTop:A.Kz.sm,paddingTop:A.Kz.sm,borderTopWidth:1,borderTopColor:"rgba(0,0,0,0.1)"},section:{marginBottom:A.Kz.md},sectionTitle:{fontSize:z.o.fontSize.bodySmall,fontFamily:z.o.fontFamily.semiBold,marginBottom:A.Kz.sm},explanation:{fontSize:z.o.fontSize.bodySmall,fontFamily:z.o.fontFamily.regular,lineHeight:z.o.lineHeight.bodySmall},ingredientItem:{marginBottom:A.Kz.sm,padding:A.Kz.sm,borderRadius:8,backgroundColor:"rgba(0,0,0,0.05)"},ingredientHeader:{flexDirection:"row",alignItems:"center",marginBottom:A.Kz.xs},severityIcon:{fontSize:12,marginRight:A.Kz.xs},ingredientName:{fontSize:z.o.fontSize.bodySmall,fontFamily:z.o.fontFamily.semiBold,flex:1,marginRight:A.Kz.sm},severityBadge:{paddingHorizontal:A.Kz.xs,paddingVertical:2,borderRadius:4},severityText:{fontSize:z.o.fontSize.caption,fontFamily:z.o.fontFamily.semiBold,textTransform:"capitalize"},ingredientReason:{fontSize:z.o.fontSize.caption,fontFamily:z.o.fontFamily.regular,marginBottom:2},conditionText:{fontSize:z.o.fontSize.caption,fontFamily:z.o.fontFamily.regular,fontStyle:"italic"},alternativesList:{flexDirection:"row",flexWrap:"wrap"},alternativeItem:{flexDirection:"row",alignItems:"center",paddingHorizontal:A.Kz.sm,paddingVertical:A.Kz.xs,borderRadius:16,marginRight:A.Kz.sm,marginBottom:A.Kz.xs},alternativeIcon:{fontSize:12,marginRight:A.Kz.xs},alternativeText:{fontSize:z.o.fontSize.caption,fontFamily:z.o.fontFamily.regular},foodDetails:{gap:A.Kz.xs},detailRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},detailLabel:{fontSize:z.o.fontSize.caption,fontFamily:z.o.fontFamily.regular},detailValue:{fontSize:z.o.fontSize.caption,fontFamily:z.o.fontFamily.semiBold,textTransform:"capitalize"}});var K=o(8018);const k=[{id:"1",foodItem:{id:"1",name:"Greek Yogurt",brand:"Chobani",category:"Dairy",barcode:"1234567890123",ingredients:["Cultured pasteurized grade A milk","Live active cultures"],allergens:["Milk"],additives:[],glutenFree:!0,lactoseFree:!1,histamineLevel:"low",dataSource:"USDA Database"},analysis:{overallSafety:"safe",flaggedIngredients:[],conditionWarnings:[],safeAlternatives:["Coconut yogurt","Almond yogurt"],explanation:"This Greek yogurt is low in histamine and contains probiotics that may benefit gut health. No problematic ingredients detected.",dataSource:"USDA Food Database",lastUpdated:new Date(Date.now()-72e5)},timestamp:new Date(Date.now()-72e5),userFeedback:"accurate"},{id:"2",foodItem:{id:"2",name:"Wheat Bread",brand:"Wonder",category:"Bakery",barcode:"1234567890124",ingredients:["Wheat Flour","Water","Yeast","Salt","Sugar"],allergens:["Wheat","Gluten"],additives:[],glutenFree:!1,lactoseFree:!0,histamineLevel:"low",dataSource:"Product Database"},analysis:{overallSafety:"caution",flaggedIngredients:[{ingredient:"Wheat",reason:"Contains gluten which may trigger IBS symptoms",severity:"moderate",condition:"gluten"},{ingredient:"Fructans",reason:"High FODMAP content may cause bloating",severity:"mild",condition:"ibs-fodmap"}],conditionWarnings:[{ingredient:"Wheat",severity:"moderate",condition:"gluten"}],safeAlternatives:["Sourdough bread","Gluten-free bread","Rice cakes"],explanation:"This wheat bread contains gluten and fructans that may trigger digestive symptoms in sensitive individuals.",dataSource:"Monash FODMAP Database",lastUpdated:new Date(Date.now()-864e5)},timestamp:new Date(Date.now()-864e5)},{id:"3",foodItem:{id:"3",name:"Aged Cheddar Cheese",brand:"Cabot",category:"Dairy",barcode:"1234567890125",ingredients:["Pasteurized milk","Salt","Cheese cultures","Enzymes"],allergens:["Milk"],additives:[],glutenFree:!0,lactoseFree:!1,histamineLevel:"high",dataSource:"USDA Database"},analysis:{overallSafety:"avoid",flaggedIngredients:[{ingredient:"Histamine",reason:"Aged cheese contains high levels of histamine",severity:"severe",condition:"histamine"},{ingredient:"Tyramine",reason:"May cause headaches and digestive issues",severity:"moderate",condition:"histamine"}],conditionWarnings:[{ingredient:"Histamine",severity:"severe",condition:"histamine"}],safeAlternatives:["Fresh mozzarella","Cottage cheese","Ricotta cheese"],explanation:"This aged cheddar cheese contains very high levels of histamine and tyramine, which can trigger severe reactions in sensitive individuals.",dataSource:"Histamine Intolerance Database",lastUpdated:new Date(Date.now()-2592e5)},timestamp:new Date(Date.now()-2592e5)},{id:"4",foodItem:{id:"4",name:"Banana",brand:"Unknown",category:"Fruit",barcode:"1234567890123",ingredients:["Banana"],allergens:[],additives:[],glutenFree:!0,lactoseFree:!0,histamineLevel:"low",dataSource:"FODMAP Database"},analysis:{overallSafety:"safe",flaggedIngredients:[],conditionWarnings:[],safeAlternatives:["Green banana","Plantain"],explanation:"Bananas are generally well-tolerated and contain prebiotic fiber that supports gut health. Choose slightly green bananas for lower sugar content.",dataSource:"FODMAP Database",lastUpdated:new Date(Date.now()-432e6)},timestamp:new Date(Date.now()-432e6)},{id:"5",foodItem:{id:"5",name:"Energy Drink",brand:"Red Bull",category:"Beverages",barcode:"1234567890126",ingredients:["Carbonated water","Sucrose","Glucose","Citric acid","Taurine","Sodium citrate","Caffeine"],allergens:[],additives:["Artificial flavors","Colors"],glutenFree:!0,lactoseFree:!0,histamineLevel:"low",dataSource:"Product Database"},analysis:{overallSafety:"caution",flaggedIngredients:[{ingredient:"Caffeine",reason:"High caffeine content may irritate the gut",severity:"moderate",condition:"additives"},{ingredient:"Artificial sweeteners",reason:"May cause bloating and digestive discomfort",severity:"mild",condition:"additives"},{ingredient:"Taurine",reason:"High levels may affect gut bacteria",severity:"mild",condition:"additives"}],conditionWarnings:[{ingredient:"Caffeine",severity:"moderate",condition:"additives"}],safeAlternatives:["Green tea","Herbal tea","Coconut water"],explanation:"This energy drink contains high levels of caffeine and artificial ingredients that may irritate the digestive system.",dataSource:"Caffeine Database",lastUpdated:new Date(Date.now()-6048e5)},timestamp:new Date(Date.now()-6048e5)}],D=()=>{const e=(0,S.cq)(),t="dark"===(0,a.A)(),o=t?b.J.dark:b.J.light,[h]=(0,n.useState)(k),[z,A]=(0,n.useState)(!1),[j,v]=(0,n.useState)(null),[w,C]=(0,n.useState)("all"),[I,D]=(0,n.useState)(""),[R,H]=(0,n.useState)("date"),[L,P]=(0,n.useState)("desc"),[V,J]=(0,n.useState)(!1),[E,O]=(0,n.useState)(!1),[W,N]=(0,n.useState)(new Set),[M,G]=(0,n.useState)(!1),U=(0,n.useRef)(null),Z=(0,n.useMemo)(()=>{let e=h;if("all"!==w&&(e=e.filter(e=>e.analysis.overallSafety===w)),I.trim()){const t=I.toLowerCase();e=e.filter(e=>{var o,n;return e.foodItem.name.toLowerCase().includes(t)||(null===(o=e.foodItem.brand)||void 0===o?void 0:o.toLowerCase().includes(t))||(null===(n=e.foodItem.category)||void 0===n?void 0:n.toLowerCase().includes(t))||e.foodItem.ingredients.some(e=>e.toLowerCase().includes(t))||e.analysis.flaggedIngredients.some(e=>e.ingredient.toLowerCase().includes(t))})}return e.sort((e,t)=>{let o=0;switch(R){case"date":o=e.timestamp.getTime()-t.timestamp.getTime();break;case"name":o=e.foodItem.name.localeCompare(t.foodItem.name);break;case"safety":const n={safe:0,caution:1,avoid:2};o=n[e.analysis.overallSafety]-n[t.analysis.overallSafety];break;case"category":o=(e.foodItem.category||"").localeCompare(t.foodItem.category||"")}return"asc"===L?o:-o}),e},[h,w,I,R,L]),q=e=>{const t=new Set(W);t.has(e)?t.delete(e):t.add(e),N(t)},Y=async e=>{try{const t=W.size>0?Z.filter(e=>W.has(e.id)):Z;let o,n;switch(e){case"json":o=JSON.stringify(t,null,2),n="application/json";break;case"csv":o=_(t),n="text/csv";break;case"pdf":o=Q(t),n="application/pdf"}await i.A.share({message:o,title:"GutSafe Scan History Export",url:"data:".concat(n,";base64,").concat(btoa(o))}),O(!1),r.A.alert("Success","Scan history exported successfully!")}catch(t){K.vF.error("Export error","ScanHistoryScreen",t),r.A.alert("Error","Failed to export scan history. Please try again.")}},_=e=>[["Date","Food Name","Brand","Category","Safety Level","Ingredients","Flagged Ingredients","Safe Alternatives","Explanation"],...e.map(e=>[e.timestamp.toISOString(),e.foodItem.name,e.foodItem.brand||"",e.foodItem.category||"",e.analysis.overallSafety,e.foodItem.ingredients.join("; "),e.analysis.flaggedIngredients.map(e=>e.ingredient).join("; "),e.analysis.safeAlternatives.join("; "),e.analysis.explanation])].map(e=>e.map(e=>'"'.concat(e.toString().replace(/"/g,'""'),'"')).join(",")).join("\n"),Q=e=>"GutSafe Scan History Report\nGenerated: ".concat((new Date).toLocaleDateString(),"\nTotal Scans: ").concat(e.length,"\n\n").concat(e.map(e=>"\nFood: ".concat(e.foodItem.name,"\nBrand: ").concat(e.foodItem.brand||"N/A","\nSafety: ").concat(e.analysis.overallSafety,"\nDate: ").concat(e.timestamp.toLocaleDateString(),"\nIngredients: ").concat(e.foodItem.ingredients.join(", "),"\nExplanation: ").concat(e.analysis.explanation,"\n---")).join("\n")),X=()=>{var e;D(""),null===(e=U.current)||void 0===e||e.blur()},$=e=>h.filter(t=>t.analysis.overallSafety===e).length,ee={total:h.length,safe:$("safe"),caution:$("caution"),avoid:$("avoid")};return(0,F.jsxs)(p.Q,{style:[T.container,{backgroundColor:o.background}],children:[(0,F.jsx)(l.A,{barStyle:t?"light-content":"dark-content"}),(0,F.jsxs)(s.A,{style:T.header,children:[(0,F.jsx)(d.A,{style:T.backButton,onPress:()=>e.goBack(),children:(0,F.jsx)(c.A,{style:[T.backButtonText,{color:o.accent}],children:"\u2039 Back"})}),(0,F.jsx)(c.A,{style:[T.title,{color:o.text}],children:"Scan History"}),(0,F.jsxs)(s.A,{style:T.headerActions,children:[(0,F.jsx)(d.A,{style:T.headerButton,onPress:()=>{G(!M),N(new Set)},children:(0,F.jsx)(c.A,{style:[T.headerButtonText,{color:o.accent}],children:M?"Cancel":"Select"})}),(0,F.jsx)(d.A,{style:T.headerButton,onPress:()=>O(!0),children:(0,F.jsx)(c.A,{style:[T.headerButtonText,{color:o.accent}],children:"Export"})})]})]}),(0,F.jsxs)(s.A,{style:[T.searchContainer,{backgroundColor:o.surface}],children:[(0,F.jsxs)(s.A,{style:[T.searchInputContainer,{borderColor:o.border}],children:[(0,F.jsx)(c.A,{style:T.searchIcon,children:"\ud83d\udd0d"}),(0,F.jsx)(m.A,{ref:U,style:[T.searchInput,{color:o.text}],placeholder:"Search foods, ingredients, brands...",placeholderTextColor:o.textSecondary,value:I,onChangeText:D,returnKeyType:"search"}),I.length>0&&(0,F.jsx)(d.A,{onPress:X,style:T.clearButton,children:(0,F.jsx)(c.A,{style:[T.clearButtonText,{color:o.textSecondary}],children:"\u2715"})})]}),(0,F.jsx)(d.A,{style:[T.searchFilterButton,{backgroundColor:o.accent}],onPress:()=>J(!V),children:(0,F.jsx)(c.A,{style:[T.searchFilterButtonText,{color:b.J.white}],children:"Filter"})})]}),V&&(0,F.jsxs)(y.A.View,{style:[T.filtersContainer,{backgroundColor:o.surface}],children:[(0,F.jsxs)(s.A,{style:T.filterRow,children:[(0,F.jsx)(c.A,{style:[T.filterLabel,{color:o.text}],children:"Sort by:"}),(0,F.jsx)(s.A,{style:T.sortButtons,children:[{key:"date",label:"Date"},{key:"name",label:"Name"},{key:"safety",label:"Safety"},{key:"category",label:"Category"}].map(e=>(0,F.jsx)(d.A,{style:[T.sortButton,{backgroundColor:R===e.key?o.accent:"transparent",borderColor:o.border}],onPress:()=>H(e.key),children:(0,F.jsx)(c.A,{style:[T.sortButtonText,{color:R===e.key?b.J.white:o.text}],children:e.label})},e.key))})]}),(0,F.jsx)(s.A,{style:T.filterRow,children:(0,F.jsx)(d.A,{style:[T.orderButton,{backgroundColor:o.accent}],onPress:()=>{P("asc"===L?"desc":"asc")},children:(0,F.jsx)(c.A,{style:[T.orderButtonText,{color:b.J.white}],children:"asc"===L?"\u2191 Ascending":"\u2193 Descending"})})})]}),M&&(0,F.jsxs)(s.A,{style:[T.selectionActions,{backgroundColor:o.accent}],children:[(0,F.jsx)(d.A,{style:T.selectionButton,onPress:()=>{N(new Set(Z.map(e=>e.id)))},children:(0,F.jsx)(c.A,{style:[T.selectionButtonText,{color:b.J.white}],children:"Select All"})}),(0,F.jsx)(d.A,{style:T.selectionButton,onPress:()=>{N(new Set)},children:(0,F.jsx)(c.A,{style:[T.selectionButtonText,{color:b.J.white}],children:"Clear"})}),(0,F.jsxs)(c.A,{style:[T.selectionCount,{color:b.J.white}],children:[W.size," selected"]})]}),(0,F.jsx)(s.A,{style:[T.statsContainer,{backgroundColor:o.surface}],children:(0,F.jsxs)(s.A,{style:T.statsRow,children:[(0,F.jsxs)(s.A,{style:T.statItem,children:[(0,F.jsx)(c.A,{style:[T.statValue,{color:o.text}],children:ee.total}),(0,F.jsx)(c.A,{style:[T.statLabel,{color:o.textSecondary}],children:"Total"})]}),(0,F.jsxs)(s.A,{style:T.statItem,children:[(0,F.jsx)(c.A,{style:[T.statValue,{color:b.J.safe}],children:ee.safe}),(0,F.jsx)(c.A,{style:[T.statLabel,{color:o.textSecondary}],children:"Safe"})]}),(0,F.jsxs)(s.A,{style:T.statItem,children:[(0,F.jsx)(c.A,{style:[T.statValue,{color:b.J.caution}],children:ee.caution}),(0,F.jsx)(c.A,{style:[T.statLabel,{color:o.textSecondary}],children:"Caution"})]}),(0,F.jsxs)(s.A,{style:T.statItem,children:[(0,F.jsx)(c.A,{style:[T.statValue,{color:b.J.avoid}],children:ee.avoid}),(0,F.jsx)(c.A,{style:[T.statLabel,{color:o.textSecondary}],children:"Avoid"})]})]})}),(0,F.jsx)(s.A,{style:T.filterContainer,children:(0,F.jsx)(f.A,{horizontal:!0,showsHorizontalScrollIndicator:!1,children:[{key:"all",label:"All",count:ee.total},{key:"safe",label:"Safe",count:ee.safe},{key:"caution",label:"Caution",count:ee.caution},{key:"avoid",label:"Avoid",count:ee.avoid}].map(e=>(0,F.jsx)(d.A,{style:[T.filterButton,{backgroundColor:w===e.key?o.accent:o.surface}],onPress:()=>C(e.key),children:(0,F.jsxs)(c.A,{style:[T.filterButtonText,{color:w===e.key?b.J.white:o.text}],children:[e.label," (",e.count,")"]})},e.key))})}),(0,F.jsx)(g.A,{data:Z,keyExtractor:e=>e.id,style:T.scrollView,showsVerticalScrollIndicator:!1,contentContainerStyle:T.scrollContent,refreshControl:(0,F.jsx)(x.A,{refreshing:z,onRefresh:async()=>{A(!0),setTimeout(()=>{A(!1)},1e3)}}),renderItem:t=>{let{item:n}=t;return(0,F.jsxs)(s.A,{style:T.scanItemContainer,children:[M&&(0,F.jsx)(d.A,{style:[T.selectionCheckbox,{backgroundColor:W.has(n.id)?o.accent:"transparent",borderColor:o.border}],onPress:()=>q(n.id),children:W.has(n.id)&&(0,F.jsx)(c.A,{style:[T.checkmark,{color:b.J.white}],children:"\u2713"})}),(0,F.jsx)(s.A,{style:M?T.selectedCard:void 0,children:(0,F.jsx)(B,{scanHistory:n,onPress:()=>{return t=n.id,void(M?q(t):e.navigate("ScanDetail",{scanId:t}));var t},onExpand:()=>{return e=n.id,void v(j===e?null:e);var e},expanded:j===n.id})})]})},ListEmptyComponent:()=>(0,F.jsxs)(s.A,{style:T.emptyState,children:[(0,F.jsx)(c.A,{style:T.emptyIcon,children:"\ud83d\udcf1"}),(0,F.jsx)(c.A,{style:[T.emptyTitle,{color:o.text}],children:I?"No matching scans found":"No scans found"}),(0,F.jsx)(c.A,{style:[T.emptySubtitle,{color:o.textSecondary}],children:I?"Try adjusting your search terms or filters":"all"===w?"Start scanning foods to see your history here":"No ".concat(w," scans found")}),I&&(0,F.jsx)(d.A,{style:[T.clearSearchButton,{backgroundColor:o.accent}],onPress:X,children:(0,F.jsx)(c.A,{style:[T.clearSearchButtonText,{color:b.J.white}],children:"Clear Search"})})]}),getItemLayout:(e,t)=>({length:200,offset:200*t,index:t}),initialNumToRender:10,maxToRenderPerBatch:5,windowSize:10,removeClippedSubviews:!0}),(0,F.jsx)(u.A,{visible:E,transparent:!0,animationType:"fade",onRequestClose:()=>O(!1),children:(0,F.jsx)(s.A,{style:T.modalOverlay,children:(0,F.jsxs)(s.A,{style:[T.modalContent,{backgroundColor:o.surface}],children:[(0,F.jsx)(c.A,{style:[T.modalTitle,{color:o.text}],children:"Export Scan History"}),(0,F.jsx)(c.A,{style:[T.modalSubtitle,{color:o.textSecondary}],children:W.size>0?"Export ".concat(W.size," selected scans"):"Export all ".concat(Z.length," scans")}),(0,F.jsxs)(s.A,{style:T.exportOptions,children:[(0,F.jsxs)(d.A,{style:[T.exportOption,{borderColor:o.border}],onPress:()=>Y("json"),children:[(0,F.jsx)(c.A,{style:T.exportIcon,children:"\ud83d\udcc4"}),(0,F.jsx)(c.A,{style:[T.exportLabel,{color:o.text}],children:"JSON"}),(0,F.jsx)(c.A,{style:[T.exportDescription,{color:o.textSecondary}],children:"Complete data with all details"})]}),(0,F.jsxs)(d.A,{style:[T.exportOption,{borderColor:o.border}],onPress:()=>Y("csv"),children:[(0,F.jsx)(c.A,{style:T.exportIcon,children:"\ud83d\udcca"}),(0,F.jsx)(c.A,{style:[T.exportLabel,{color:o.text}],children:"CSV"}),(0,F.jsx)(c.A,{style:[T.exportDescription,{color:o.textSecondary}],children:"Spreadsheet format for analysis"})]}),(0,F.jsxs)(d.A,{style:[T.exportOption,{borderColor:o.border}],onPress:()=>Y("pdf"),children:[(0,F.jsx)(c.A,{style:T.exportIcon,children:"\ud83d\udccb"}),(0,F.jsx)(c.A,{style:[T.exportLabel,{color:o.text}],children:"PDF"}),(0,F.jsx)(c.A,{style:[T.exportDescription,{color:o.textSecondary}],children:"Printable report format"})]})]}),(0,F.jsx)(s.A,{style:T.modalActions,children:(0,F.jsx)(d.A,{style:[T.modalButton,{backgroundColor:o.border}],onPress:()=>O(!1),children:(0,F.jsx)(c.A,{style:[T.modalButtonText,{color:o.text}],children:"Cancel"})})})]})})})]})},T=h.A.create({container:{flex:1},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:A.Kz.lg,paddingVertical:A.Kz.md},backButton:{padding:A.Kz.xs},backButtonText:{fontSize:z.o.fontSize.body,fontFamily:z.o.fontFamily.semiBold},title:{fontSize:z.o.fontSize.h2,fontFamily:z.o.fontFamily.bold,flex:1,textAlign:"center"},headerActions:{flexDirection:"row",gap:A.Kz.sm},headerButton:{padding:A.Kz.xs},headerButtonText:{fontSize:z.o.fontSize.body,fontFamily:z.o.fontFamily.semiBold},searchContainer:{flexDirection:"row",alignItems:"center",paddingHorizontal:A.Kz.lg,paddingVertical:A.Kz.md,gap:A.Kz.sm},searchInputContainer:{flex:1,flexDirection:"row",alignItems:"center",borderWidth:1,borderRadius:A.Z6.md,paddingHorizontal:A.Kz.md,paddingVertical:A.Kz.sm},searchIcon:{fontSize:16,marginRight:A.Kz.sm},searchInput:{flex:1,fontSize:z.o.fontSize.body,fontFamily:z.o.fontFamily.regular},clearButton:{padding:A.Kz.xs},clearButtonText:{fontSize:16,fontFamily:z.o.fontFamily.bold},searchFilterButton:{paddingHorizontal:A.Kz.md,paddingVertical:A.Kz.sm,borderRadius:A.Z6.md},searchFilterButtonText:{fontSize:z.o.fontSize.bodySmall,fontFamily:z.o.fontFamily.semiBold},filtersContainer:{paddingHorizontal:A.Kz.lg,paddingVertical:A.Kz.md,borderBottomWidth:1,borderBottomColor:"rgba(15, 82, 87, 0.1)"},filterRow:{flexDirection:"row",alignItems:"center",marginBottom:A.Kz.sm},filterLabel:{fontSize:z.o.fontSize.body,fontFamily:z.o.fontFamily.medium,marginRight:A.Kz.md},sortButtons:{flexDirection:"row",gap:A.Kz.sm},sortButton:{paddingHorizontal:A.Kz.md,paddingVertical:A.Kz.sm,borderRadius:A.Z6.sm,borderWidth:1},sortButtonText:{fontSize:z.o.fontSize.bodySmall,fontFamily:z.o.fontFamily.medium},orderButton:{paddingHorizontal:A.Kz.md,paddingVertical:A.Kz.sm,borderRadius:A.Z6.sm},orderButtonText:{fontSize:z.o.fontSize.bodySmall,fontFamily:z.o.fontFamily.semiBold},selectionActions:{flexDirection:"row",alignItems:"center",paddingHorizontal:A.Kz.lg,paddingVertical:A.Kz.sm,gap:A.Kz.md},selectionButton:{paddingHorizontal:A.Kz.md,paddingVertical:A.Kz.sm},selectionButtonText:{fontSize:z.o.fontSize.bodySmall,fontFamily:z.o.fontFamily.semiBold},selectionCount:{fontSize:z.o.fontSize.bodySmall,fontFamily:z.o.fontFamily.medium,marginLeft:"auto"},scanItemContainer:{flexDirection:"row",alignItems:"flex-start",paddingHorizontal:A.Kz.lg,marginBottom:A.Kz.sm},selectionCheckbox:{width:24,height:24,borderRadius:12,borderWidth:2,alignItems:"center",justifyContent:"center",marginRight:A.Kz.sm,marginTop:A.Kz.sm},checkmark:{fontSize:16,fontFamily:z.o.fontFamily.bold},selectedCard:{opacity:.8},statsContainer:{marginHorizontal:A.Kz.lg,marginBottom:A.Kz.md,borderRadius:12,padding:A.Kz.md},statsRow:{flexDirection:"row",justifyContent:"space-around"},statItem:{alignItems:"center"},statValue:{fontSize:z.o.fontSize.h2,fontFamily:z.o.fontFamily.bold,marginBottom:A.Kz.xs},statLabel:{fontSize:z.o.fontSize.caption,fontFamily:z.o.fontFamily.regular},filterContainer:{paddingHorizontal:A.Kz.lg,marginBottom:A.Kz.md},filterButton:{paddingHorizontal:A.Kz.md,paddingVertical:A.Kz.sm,borderRadius:20,marginRight:A.Kz.sm},filterButtonText:{fontSize:z.o.fontSize.bodySmall,fontFamily:z.o.fontFamily.semiBold},scrollView:{flex:1},scrollContent:{paddingBottom:A.Kz.xxl},emptyState:{alignItems:"center",justifyContent:"center",paddingVertical:A.Kz.xxl,paddingHorizontal:A.Kz.xl},emptyIcon:{fontSize:48,marginBottom:A.Kz.md},emptyTitle:{fontSize:z.o.fontSize.h3,fontFamily:z.o.fontFamily.bold,marginBottom:A.Kz.sm,textAlign:"center"},emptySubtitle:{fontSize:z.o.fontSize.body,fontFamily:z.o.fontFamily.regular,textAlign:"center",lineHeight:z.o.lineHeight.body},clearSearchButton:{paddingHorizontal:A.Kz.lg,paddingVertical:A.Kz.sm,borderRadius:A.Z6.md,marginTop:A.Kz.md},clearSearchButtonText:{fontSize:z.o.fontSize.body,fontFamily:z.o.fontFamily.semiBold},modalOverlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",paddingHorizontal:A.Kz.lg},modalContent:{width:"100%",maxWidth:400,borderRadius:A.Z6.lg,padding:A.Kz.lg},modalTitle:{fontSize:z.o.fontSize.h3,fontFamily:z.o.fontFamily.bold,textAlign:"center",marginBottom:A.Kz.sm},modalSubtitle:{fontSize:z.o.fontSize.body,fontFamily:z.o.fontFamily.regular,textAlign:"center",marginBottom:A.Kz.lg},exportOptions:{gap:A.Kz.md,marginBottom:A.Kz.lg},exportOption:{flexDirection:"row",alignItems:"center",padding:A.Kz.md,borderRadius:A.Z6.md,borderWidth:1},exportIcon:{fontSize:24,marginRight:A.Kz.md},exportLabel:{fontSize:z.o.fontSize.h4,fontFamily:z.o.fontFamily.bold,flex:1},exportDescription:{fontSize:z.o.fontSize.bodySmall,fontFamily:z.o.fontFamily.regular,textAlign:"right"},modalActions:{flexDirection:"row",justifyContent:"center"},modalButton:{paddingHorizontal:A.Kz.xl,paddingVertical:A.Kz.md,borderRadius:A.Z6.md},modalButtonText:{fontSize:z.o.fontSize.body,fontFamily:z.o.fontFamily.semiBold}})}}]);
//# sourceMappingURL=268.e5711491.chunk.js.map