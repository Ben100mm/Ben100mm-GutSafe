/*! For license information please see 742.0c1bea55.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkgutsafe_app=self.webpackChunkgutsafe_app||[]).push([[742],{6267:(e,t,o)=>{o.d(t,{Q:()=>f});var a=o(45),n=o(5043),r=o(8449),s=o(7169),i=o(474);const l=["style","mode","edges"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)({}).hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},d.apply(null,arguments)}const c={top:"additive",left:"additive",bottom:"additive",right:"additive"};function m(e,t,o){switch(o){case"off":return t;case"maximum":return Math.max(t,e);default:return t+e}}const f=n.forwardRef((e,t)=>{let{style:o={},mode:f,edges:g}=e,u=(0,a.A)(e,l);const y=(0,i.Or)(),h=n.useMemo(()=>null==g?c:Array.isArray(g)?g.reduce((e,t)=>(e[t]="additive",e),{}):g,[g]),x=n.useMemo(()=>{const e=r.A.flatten(o);if("margin"===f){const{margin:t=0,marginVertical:a=t,marginHorizontal:n=t,marginTop:r=a,marginRight:s=n,marginBottom:i=a,marginLeft:l=n}=e,d={marginTop:m(y.top,r,h.top),marginRight:m(y.right,s,h.right),marginBottom:m(y.bottom,i,h.bottom),marginLeft:m(y.left,l,h.left)};return[o,d]}{const{padding:t=0,paddingVertical:a=t,paddingHorizontal:n=t,paddingTop:r=a,paddingRight:s=n,paddingBottom:i=a,paddingLeft:l=n}=e,d={paddingTop:m(y.top,r,h.top),paddingRight:m(y.right,s,h.right),paddingBottom:m(y.bottom,i,h.bottom),paddingLeft:m(y.left,l,h.left)};return[o,d]}},[h.bottom,h.left,h.right,h.top,y.bottom,y.left,y.right,y.top,f,o]);return n.createElement(s.A,d({style:x},u,{ref:t}))})},6742:(e,t,o)=>{o.r(t),o.d(t,{SafeFoodsScreen:()=>A});var a=o(9379),n=o(5043),r=o(9426),s=o(8449),i=o(3692),l=o(4907),d=o(1695),c=o(3523),m=o(6925),f=o(7416),g=o(7169),u=o(1081),y=o(6267),h=o(7944),x=o(3942),p=o(4459),b=o(1685),S=o(579);const z=[{id:"1",foodItem:{id:"1",name:"Greek Yogurt",brand:"Chobani",category:"Dairy",barcode:"1234567890123",ingredients:["Cultured pasteurized grade A milk","Live active cultures"],allergens:["Milk"],additives:[],fodmapLevel:"low",glutenFree:!0,lactoseFree:!1,histamineLevel:"low",dataSource:"USDA Food Database",isSafeFood:!0,addedToSafeFoods:new Date(Date.now()-6048e5)},addedDate:new Date(Date.now()-6048e5),lastUsed:new Date(Date.now()-864e5),usageCount:12,notes:"Great for breakfast, low histamine"},{id:"2",foodItem:{id:"2",name:"Banana",brand:"Unknown",category:"Fruit",barcode:"0000000000000",ingredients:["Banana"],allergens:[],additives:[],fodmapLevel:"low",glutenFree:!0,lactoseFree:!0,histamineLevel:"low",dataSource:"FODMAP Database",isSafeFood:!0,addedToSafeFoods:new Date(Date.now()-12096e5)},addedDate:new Date(Date.now()-12096e5),lastUsed:new Date(Date.now()-1728e5),usageCount:8,notes:"Best when slightly green"},{id:"3",foodItem:{id:"3",name:"Quinoa",brand:"Bob's Red Mill",category:"Grains",barcode:"1234567890127",ingredients:["Quinoa"],allergens:[],additives:[],fodmapLevel:"low",glutenFree:!0,lactoseFree:!0,histamineLevel:"low",dataSource:"Monash FODMAP Database",isSafeFood:!0,addedToSafeFoods:new Date(Date.now()-18144e5)},addedDate:new Date(Date.now()-18144e5),lastUsed:new Date(Date.now()-2592e5),usageCount:15,notes:"Perfect protein source"}],A=()=>{const e=(0,h.cq)(),t="dark"===(0,u.A)(),o=t?x.J.dark:x.J.light,[s,p]=(0,n.useState)(z),[b,A]=(0,n.useState)(!1),[j,F]=(0,n.useState)(""),[C,I]=(0,n.useState)("recent"),v=(0,n.useMemo)(()=>{let e=s.filter(e=>e.foodItem.name.toLowerCase().includes(j.toLowerCase())||e.foodItem.brand&&e.foodItem.brand.toLowerCase().includes(j.toLowerCase()));switch(C){case"recent":return e.sort((e,t)=>{var o,a;return((null===(o=t.lastUsed)||void 0===o?void 0:o.getTime())||0)-((null===(a=e.lastUsed)||void 0===a?void 0:a.getTime())||0)});case"usage":return e.sort((e,t)=>t.usageCount-e.usageCount);case"name":return e.sort((e,t)=>e.foodItem.name.localeCompare(t.foodItem.name));default:return e}},[s,j,C]),D=e=>{switch(e){case"recent":return"\ud83d\udd52";case"usage":return"\ud83d\udcca";case"name":return"\ud83d\udd24";default:return""}},B=e=>{if(!e)return"Never used";const t=(new Date).getTime()-e.getTime(),o=Math.floor(t/864e5);return 0===o?"Today":1===o?"Yesterday":o<7?"".concat(o," days ago"):o<30?"".concat(Math.floor(o/7)," weeks ago"):"".concat(Math.floor(o/30)," months ago")};return(0,S.jsxs)(y.Q,{style:[w.container,{backgroundColor:o.background}],children:[(0,S.jsx)(d.A,{barStyle:t?"light-content":"dark-content"}),(0,S.jsxs)(g.A,{style:w.header,children:[(0,S.jsx)(f.A,{style:w.backButton,onPress:()=>e.goBack(),children:(0,S.jsx)(c.A,{style:[w.backButtonText,{color:o.accent}],children:"\u2039 Back"})}),(0,S.jsx)(c.A,{style:[w.title,{color:o.text}],children:"Safe Foods"}),(0,S.jsx)(g.A,{style:w.headerRight})]}),(0,S.jsxs)(g.A,{style:[w.searchContainer,{backgroundColor:o.surface}],children:[(0,S.jsx)(m.A,{style:[w.searchInput,{color:o.text}],placeholder:"Search safe foods...",placeholderTextColor:o.textTertiary,value:j,onChangeText:F}),(0,S.jsx)(c.A,{style:w.searchIcon,children:"\ud83d\udd0d"})]}),(0,S.jsx)(g.A,{style:w.sortContainer,children:(0,S.jsx)(l.A,{horizontal:!0,showsHorizontalScrollIndicator:!1,children:[{key:"recent",label:"Recent"},{key:"usage",label:"Most Used"},{key:"name",label:"Name"}].map(e=>(0,S.jsxs)(f.A,{style:[w.sortButton,{backgroundColor:C===e.key?o.accent:o.surface}],onPress:()=>I(e.key),children:[(0,S.jsx)(c.A,{style:w.sortIcon,children:D(e.key)}),(0,S.jsx)(c.A,{style:[w.sortButtonText,{color:C===e.key?x.J.white:o.text}],children:e.label})]},e.key))})}),(0,S.jsx)(l.A,{style:w.scrollView,showsVerticalScrollIndicator:!1,contentContainerStyle:w.scrollContent,refreshControl:(0,S.jsx)(i.A,{refreshing:b,onRefresh:async()=>{A(!0),setTimeout(()=>{A(!1)},1e3)}}),children:0===v.length?(0,S.jsxs)(g.A,{style:w.emptyState,children:[(0,S.jsx)(c.A,{style:w.emptyIcon,children:"\ud83c\udf4e"}),(0,S.jsx)(c.A,{style:[w.emptyTitle,{color:o.text}],children:j?"No matching safe foods":"No safe foods yet"}),(0,S.jsx)(c.A,{style:[w.emptySubtitle,{color:o.textSecondary}],children:j?"Try adjusting your search terms":"Add foods to your safe foods list from scan results"})]}):v.map(e=>(0,S.jsxs)(g.A,{style:[w.foodCard,{backgroundColor:o.surface}],children:[(0,S.jsxs)(g.A,{style:w.foodHeader,children:[(0,S.jsxs)(g.A,{style:w.foodInfo,children:[(0,S.jsx)(c.A,{style:[w.foodName,{color:o.text}],children:e.foodItem.name}),e.foodItem.brand&&(0,S.jsx)(c.A,{style:[w.foodBrand,{color:o.textSecondary}],children:e.foodItem.brand}),(0,S.jsxs)(c.A,{style:[w.dataSource,{color:o.textTertiary}],children:["Source: ",e.foodItem.dataSource]})]}),(0,S.jsxs)(g.A,{style:w.foodActions,children:[(0,S.jsx)(f.A,{style:w.actionButton,onPress:()=>(e=>{const t=s.find(t=>t.id===e);t&&r.A.prompt("Add Note","Add a personal note about this safe food:",[{text:"Cancel",style:"cancel"},{text:"Save",onPress:t=>{t&&p(o=>o.map(o=>o.id===e?(0,a.A)((0,a.A)({},o),{},{notes:t}):o))}}],"plain-text",t.notes||"")})(e.id),children:(0,S.jsx)(c.A,{style:w.actionIcon,children:"\ud83d\udcdd"})}),(0,S.jsx)(f.A,{style:w.actionButton,onPress:()=>{return t=e.id,void r.A.alert("Remove from Safe Foods","Are you sure you want to remove this food from your safe foods list?",[{text:"Cancel",style:"cancel"},{text:"Remove",style:"destructive",onPress:()=>{p(e=>e.filter(e=>e.id!==t))}}]);var t},children:(0,S.jsx)(c.A,{style:w.actionIcon,children:"\ud83d\uddd1\ufe0f"})})]})]}),e.notes&&(0,S.jsx)(g.A,{style:[w.notesContainer,{backgroundColor:o.background}],children:(0,S.jsxs)(c.A,{style:[w.notesText,{color:o.textSecondary}],children:["\ud83d\udcad ",e.notes]})}),(0,S.jsxs)(g.A,{style:w.foodStats,children:[(0,S.jsxs)(g.A,{style:w.statItem,children:[(0,S.jsx)(c.A,{style:[w.statValue,{color:o.text}],children:e.usageCount}),(0,S.jsx)(c.A,{style:[w.statLabel,{color:o.textSecondary}],children:"Uses"})]}),(0,S.jsxs)(g.A,{style:w.statItem,children:[(0,S.jsx)(c.A,{style:[w.statValue,{color:o.text}],children:B(e.lastUsed)}),(0,S.jsx)(c.A,{style:[w.statLabel,{color:o.textSecondary}],children:"Last Used"})]}),(0,S.jsxs)(g.A,{style:w.statItem,children:[(0,S.jsx)(c.A,{style:[w.statValue,{color:o.text}],children:e.foodItem.fodmapLevel||"N/A"}),(0,S.jsx)(c.A,{style:[w.statLabel,{color:o.textSecondary}],children:"FODMAP"})]})]})]},e.id))})]})},w=s.A.create({container:{flex:1},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:b.Kz.lg,paddingVertical:b.Kz.md},backButton:{padding:b.Kz.xs},backButtonText:{fontSize:p.o.fontSize.body,fontFamily:p.o.fontFamily.semiBold},title:{fontSize:p.o.fontSize.h2,fontFamily:p.o.fontFamily.bold},headerRight:{width:60},searchContainer:{flexDirection:"row",alignItems:"center",marginHorizontal:b.Kz.lg,marginBottom:b.Kz.md,borderRadius:b.Z6.lg,paddingHorizontal:b.Kz.md,paddingVertical:b.Kz.sm},searchInput:{flex:1,fontSize:p.o.fontSize.body,fontFamily:p.o.fontFamily.regular,paddingVertical:b.Kz.sm},searchIcon:{fontSize:16,marginLeft:b.Kz.sm},sortContainer:{paddingHorizontal:b.Kz.lg,marginBottom:b.Kz.md},sortButton:{flexDirection:"row",alignItems:"center",paddingHorizontal:b.Kz.md,paddingVertical:b.Kz.sm,borderRadius:20,marginRight:b.Kz.sm},sortIcon:{fontSize:14,marginRight:b.Kz.xs},sortButtonText:{fontSize:p.o.fontSize.bodySmall,fontFamily:p.o.fontFamily.semiBold},scrollView:{flex:1},scrollContent:{paddingBottom:b.Kz.xxl},foodCard:{marginHorizontal:b.Kz.lg,marginBottom:b.Kz.md,borderRadius:b.Z6.lg,padding:b.Kz.lg},foodHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",marginBottom:b.Kz.sm},foodInfo:{flex:1},foodName:{fontSize:p.o.fontSize.h3,fontFamily:p.o.fontFamily.bold,marginBottom:2},foodBrand:{fontSize:p.o.fontSize.body,fontFamily:p.o.fontFamily.regular,marginBottom:2},dataSource:{fontSize:p.o.fontSize.caption,fontFamily:p.o.fontFamily.regular},foodActions:{flexDirection:"row",gap:b.Kz.sm},actionButton:{padding:b.Kz.xs},actionIcon:{fontSize:16},notesContainer:{marginTop:b.Kz.sm,padding:b.Kz.sm,borderRadius:b.Z6.sm},notesText:{fontSize:p.o.fontSize.bodySmall,fontFamily:p.o.fontFamily.regular,fontStyle:"italic"},foodStats:{flexDirection:"row",justifyContent:"space-around",marginTop:b.Kz.md,paddingTop:b.Kz.md,borderTopWidth:1,borderTopColor:"rgba(0,0,0,0.1)"},statItem:{alignItems:"center"},statValue:{fontSize:p.o.fontSize.body,fontFamily:p.o.fontFamily.bold,marginBottom:2},statLabel:{fontSize:p.o.fontSize.caption,fontFamily:p.o.fontFamily.regular},emptyState:{alignItems:"center",justifyContent:"center",paddingVertical:b.Kz.xxl,paddingHorizontal:b.Kz.xl},emptyIcon:{fontSize:48,marginBottom:b.Kz.md},emptyTitle:{fontSize:p.o.fontSize.h3,fontFamily:p.o.fontFamily.bold,marginBottom:b.Kz.sm,textAlign:"center"},emptySubtitle:{fontSize:p.o.fontSize.body,fontFamily:p.o.fontFamily.regular,textAlign:"center",lineHeight:p.o.lineHeight.body}})},9426:(e,t,o)=>{o.d(t,{A:()=>a});const a=class{static alert(){}}}}]);
//# sourceMappingURL=742.0c1bea55.chunk.js.map