/*! For license information please see 112.e17ad7fa.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkgutsafe_app=self.webpackChunkgutsafe_app||[]).push([[112],{1405:(e,t,n)=>{n.d(t,{t:()=>l});var i=n(9379),o=n(45),a=n(579);const r=["style","children"],l=e=>{let{style:t,children:n}=e;(0,o.A)(e,r);return(0,a.jsx)("div",{style:(0,i.A)((0,i.A)({},t),{},{backdropFilter:"blur(10px)",backgroundColor:"rgba(255, 255, 255, 0.1)"}),children:n})}},2218:(e,t,n)=>{n.d(t,{Q:()=>b});var i=n(9379),o=n(5043),a=n(9366),r=n(3887),l=n(8449),s=n(7850),d=n(3523),c=n(7416),u=n(7169),g=n(8501),m=n(3942),y=n(4459),f=n(1685),h=n(5938),A=n(8137),p=n(4796),x=n(579);const b=e=>{let{title:t,onPress:n,variant:l="primary",size:y="medium",disabled:f=!1,loading:b=!1,style:S,textStyle:w,icon:z,hapticType:j="light",enable3D:C=!1,accessibilityLabel:F,accessibilityHint:R}=e;const V=(0,o.useRef)(new a.A.Value(1)).current,B=(0,o.useRef)(new a.A.Value(0)).current,D=(0,o.useRef)(new a.A.Value(0)).current,T=(0,o.useRef)(new a.A.Value(0)).current,K=(0,o.useRef)(new a.A.Value(0)).current;(0,o.useEffect)(()=>{if(C){A.V1.scale3D({duration:300,useNativeDriver:"web"!==r.A.OS}).start()}},[C]);const k=()=>{h.n.trigger(j);const e=[a.A.spring(V,{toValue:.95,useNativeDriver:"web"!==r.A.OS}),a.A.timing(B,{toValue:1,duration:200,useNativeDriver:"web"!==r.A.OS})];C&&e.push(a.A.timing(T,{toValue:-5,duration:200,useNativeDriver:"web"!==r.A.OS}),a.A.timing(K,{toValue:1,duration:200,useNativeDriver:"web"!==r.A.OS})),a.A.parallel(e).start()},N=()=>{const e=[a.A.spring(V,{toValue:1,useNativeDriver:"web"!==r.A.OS}),a.A.timing(B,{toValue:0,duration:200,useNativeDriver:"web"!==r.A.OS})];C&&e.push(a.A.timing(T,{toValue:0,duration:200,useNativeDriver:"web"!==r.A.OS}),a.A.timing(K,{toValue:0,duration:200,useNativeDriver:"web"!==r.A.OS})),a.A.parallel(e).start()},O=()=>{f||b||n()},I=[v.button,v[y],"outline"===l&&v.outline,"glass"===l&&v.glass,f&&v.disabled,S],J=[v.text,v["".concat(y,"Text")],"outline"===l&&v.outlineText,"glass"===l&&v.glassText,f&&v.disabledText,w],P={opacity:B,transform:[{scale:B}]},H=C?(0,i.A)({transform:[{scale:V},{translateZ:T},...A.sF.createRotation3D(D,"y")]},A.sF.createPerspective(1e3)):{transform:[{scale:V}]},q=C?{shadowOpacity:K.interpolate({inputRange:[0,1],outputRange:[.1,.3]}),shadowRadius:K.interpolate({inputRange:[0,1],outputRange:[4,12]}),shadowOffset:{width:K.interpolate({inputRange:[0,1],outputRange:[0,4]}),height:K.interpolate({inputRange:[0,1],outputRange:[2,8]})}}:{},E=p.A.createButtonConfig(F||t,R,f,!1);return"primary"===l?(0,x.jsx)(a.A.View,{style:[H,q],children:(0,x.jsx)(c.A,(0,i.A)((0,i.A)({onPress:O,onPressIn:k,onPressOut:N,disabled:f||b,style:[I,{overflow:"hidden"}]},E),{},{children:(0,x.jsxs)(g.A,{colors:f?[m.J.body,m.J.body]:m.J.primaryGradient,style:v.gradient,children:[(0,x.jsx)(a.A.View,{style:[v.glow,P]}),(0,x.jsx)(u.A,{style:v.content,children:b?(0,x.jsx)(s.A,{color:m.J.white,size:"small"}):(0,x.jsxs)(x.Fragment,{children:[z&&(0,x.jsx)(u.A,{style:v.icon,children:z}),(0,x.jsx)(d.A,{style:J,children:t})]})})]})}))}):(0,x.jsx)(a.A.View,{style:[H,q],children:(0,x.jsx)(c.A,(0,i.A)((0,i.A)({onPress:O,onPressIn:k,onPressOut:N,disabled:f||b,style:I},E),{},{children:b?(0,x.jsx)(s.A,{color:"outline"===l?m.J.primary:m.J.white,size:"small"}):(0,x.jsxs)(x.Fragment,{children:[z&&(0,x.jsx)(u.A,{style:v.icon,children:z}),(0,x.jsx)(d.A,{style:J,children:t})]})}))})},v=l.A.create({button:{borderRadius:f.Z6.md,alignItems:"center",justifyContent:"center",position:"relative"},gradient:{flex:1,width:"100%",alignItems:"center",justifyContent:"center",position:"relative"},glow:{position:"absolute",top:-2,left:-2,right:-2,bottom:-2,borderRadius:f.Z6.md+2,backgroundColor:m.J.primaryLight,opacity:.3},content:{flexDirection:"row",alignItems:"center",justifyContent:"center"},icon:{marginRight:f.Kz.sm},outline:{backgroundColor:"transparent",borderWidth:2,borderColor:m.J.primary},glass:{backgroundColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,borderColor:"rgba(255, 255, 255, 0.2)"},disabled:{opacity:.5},small:{paddingHorizontal:f.Kz.md,paddingVertical:f.Kz.sm,minHeight:36},medium:{paddingHorizontal:f.Kz.lg,paddingVertical:f.Kz.md,minHeight:48},large:{paddingHorizontal:f.Kz.xl,paddingVertical:f.Kz.lg,minHeight:56},text:{fontFamily:y.o.fontFamily.semiBold,textAlign:"center"},smallText:{fontSize:y.o.fontSize.bodySmall},mediumText:{fontSize:y.o.fontSize.body},largeText:{fontSize:y.o.fontSize.h3},outlineText:{color:m.J.primary},glassText:{color:m.J.white},disabledText:{color:m.J.body}})},8137:(e,t,n)=>{n.d(t,{AK:()=>c,V1:()=>d,sF:()=>u});var i=n(9366),o=n(7181),a=n(6222),r=n(3887);n(5938);const{width:l,height:s}=o.A.get("window");class d{static fadeIn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.A.timing(new i.A.Value(0),{toValue:1,duration:e.duration||300,delay:e.delay||0,useNativeDriver:!1!==e.useNativeDriver,easing:e.easing||a.A.out(a.A.quad)})}static fadeOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.A.timing(new i.A.Value(1),{toValue:0,duration:e.duration||300,delay:e.delay||0,useNativeDriver:!1!==e.useNativeDriver,easing:e.easing||a.A.in(a.A.quad)})}static slideInFromRight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.A.timing(new i.A.Value(l),{toValue:0,duration:e.duration||300,delay:e.delay||0,useNativeDriver:!1!==e.useNativeDriver,easing:e.easing||a.A.out(a.A.cubic)})}static slideInFromLeft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.A.timing(new i.A.Value(-l),{toValue:0,duration:e.duration||300,delay:e.delay||0,useNativeDriver:!1!==e.useNativeDriver,easing:e.easing||a.A.out(a.A.cubic)})}static slideInFromBottom(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.A.timing(new i.A.Value(s),{toValue:0,duration:e.duration||300,delay:e.delay||0,useNativeDriver:!1!==e.useNativeDriver,easing:e.easing||a.A.out(a.A.cubic)})}static slideInFromTop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.A.timing(new i.A.Value(-s),{toValue:0,duration:e.duration||300,delay:e.delay||0,useNativeDriver:!1!==e.useNativeDriver,easing:e.easing||a.A.out(a.A.cubic)})}static rotate3D(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.A.timing(new i.A.Value(0),{toValue:1,duration:e.duration||600,delay:e.delay||0,useNativeDriver:!1!==e.useNativeDriver,easing:e.easing||a.A.inOut(a.A.cubic)})}static scale3D(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.A.timing(new i.A.Value(0),{toValue:1,duration:e.duration||400,delay:e.delay||0,useNativeDriver:!1!==e.useNativeDriver,easing:e.easing||a.A.out(a.A.back(1.2))})}static flip3D(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.A.timing(new i.A.Value(0),{toValue:1,duration:e.duration||500,delay:e.delay||0,useNativeDriver:!1!==e.useNativeDriver,easing:e.easing||a.A.inOut(a.A.cubic)})}static springBounce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.A.spring(new i.A.Value(0),{toValue:1,tension:e.tension||100,friction:e.friction||8,useNativeDriver:!1!==e.useNativeDriver})}static springGentle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.A.spring(new i.A.Value(0),{toValue:1,tension:e.tension||50,friction:e.friction||10,useNativeDriver:!1!==e.useNativeDriver})}static springSnappy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.A.spring(new i.A.Value(0),{toValue:1,tension:e.tension||200,friction:e.friction||6,useNativeDriver:!1!==e.useNativeDriver})}}class c{static createStaggeredAnimation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return i.A.stagger(t,e)}static createSequence(e){return i.A.sequence(e)}static createParallel(e){return i.A.parallel(e)}static createLoop(e,t){return i.A.loop(e,{iterations:t})}static createPulse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.2,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;return i.A.loop(i.A.sequence([i.A.timing(e,{toValue:n,duration:o/2,useNativeDriver:"web"!==r.A.OS,easing:a.A.inOut(a.A.sin)}),i.A.timing(e,{toValue:t,duration:o/2,useNativeDriver:"web"!==r.A.OS,easing:a.A.inOut(a.A.sin)})]))}static createShake(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return i.A.sequence([i.A.timing(e,{toValue:t,duration:50,useNativeDriver:!0}),i.A.timing(e,{toValue:-t,duration:50,useNativeDriver:!0}),i.A.timing(e,{toValue:t,duration:50,useNativeDriver:!0}),i.A.timing(e,{toValue:-t,duration:50,useNativeDriver:!0}),i.A.timing(e,{toValue:0,duration:50,useNativeDriver:!0})])}static createBounce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;return i.A.sequence([i.A.timing(e,{toValue:1+t,duration:150,useNativeDriver:"web"!==r.A.OS,easing:a.A.out(a.A.quad)}),i.A.timing(e,{toValue:1-.5*t,duration:100,useNativeDriver:"web"!==r.A.OS,easing:a.A.in(a.A.quad)}),i.A.timing(e,{toValue:1,duration:100,useNativeDriver:"web"!==r.A.OS,easing:a.A.out(a.A.quad)})])}static createMorph(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300;return e.setValue(t),i.A.timing(e,{toValue:n,duration:o,useNativeDriver:!1,easing:a.A.inOut(a.A.cubic)})}}class u{static createRotation3D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";const n=["0deg","360deg"];return{["rotate".concat(t.toUpperCase())]:e.interpolate({inputRange:[0,1],outputRange:n,extrapolate:"clamp"})}}static createScale3D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{scale:e.interpolate({inputRange:[0,1],outputRange:[0,t],extrapolate:"clamp"})}}static createPerspective(){return{perspective:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3}}static createTranslate3D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{translateX:e.interpolate({inputRange:[0,1],outputRange:[0,t],extrapolate:"clamp"}),translateY:e.interpolate({inputRange:[0,1],outputRange:[0,n],extrapolate:"clamp"}),translateZ:e.interpolate({inputRange:[0,1],outputRange:[0,i],extrapolate:"clamp"})}}static createFlipTransform(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";const n=["0deg","90deg","0deg"];return{["rotate".concat(t.toUpperCase())]:e.interpolate({inputRange:[0,.5,1],outputRange:n,extrapolate:"clamp"})}}}},8501:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(9379),o=n(45),a=(n(5043),n(3887)),r=n(7169),l=n(579);const s=["colors","style","children","start","end","locations"];let d=null;if("web"!==a.A.OS)try{d=n(7740).A}catch(u){console.warn("Failed to load native LinearGradient:",u)}const c="web"===a.A.OS?e=>{let{colors:t,style:n,children:a,start:d,end:c,locations:u}=e,g=(0,o.A)(e,s);const m=t&&t.length>0?t[0]:"#000000";return(0,l.jsx)(r.A,(0,i.A)((0,i.A)({style:[{backgroundColor:m},n]},g),{},{children:a}))}:d},9112:(e,t,n)=>{n.r(t),n.d(t,{ScannerScreen:()=>J});var i=n(9379),o=n(5043),a=n(1081),r=n(9366),l=n(9426),s=n(7169),d=n(3523),c=n(7416),u=n(9132),g=n(8449),m=n(3887),y=n(45),f=n(579);const h=["style","children"],A=e=>{let{style:t,children:n}=e;(0,y.A)(e,h);return(0,f.jsxs)("div",{style:(0,i.A)((0,i.A)({},t),{},{backgroundColor:"#000",display:"flex",alignItems:"center",justifyContent:"center",color:"white"}),children:[(0,f.jsx)("div",{children:"Camera not available on web"}),n]})};var p=n(8501),x=n(7944),b=n(3942),v=n(4459),S=n(1685),w=n(2218),z=n(1405);const j=e=>{let{children:t,style:n,intensity:i=20,tint:o="light"}=e;return(0,f.jsx)(s.A,{style:[C.container,n],children:(0,f.jsx)(z.t,{style:C.blur,blurType:o,blurAmount:i,reducedTransparencyFallbackColor:b.J.white,children:(0,f.jsx)(s.A,{style:C.content,children:t})})})},C=g.A.create({container:(0,i.A)({borderRadius:S.Z6.lg,overflow:"hidden"},S.qd.lg),blur:{flex:1},content:{flex:1,backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:S.Z6.lg,borderWidth:1,borderColor:"rgba(255, 255, 255, 0.2)"}}),F=o.memo(e=>{let{result:t,title:n,subtitle:i,style:a}=e;const r=(0,o.useMemo)(()=>{switch(t){case"safe":default:return{color:b.J.safe,icon:"\u2705",backgroundColor:"".concat(b.J.safe,"15")};case"caution":return{color:b.J.caution,icon:"\u26a0\ufe0f",backgroundColor:"".concat(b.J.caution,"15")};case"avoid":return{color:b.J.avoid,icon:"\u274c",backgroundColor:"".concat(b.J.avoid,"15")}}},[t]);return(0,f.jsxs)(s.A,{style:[R.container,{backgroundColor:r.backgroundColor},a],children:[(0,f.jsx)(s.A,{style:R.iconContainer,children:(0,f.jsx)(d.A,{style:R.icon,children:r.icon})}),(0,f.jsxs)(s.A,{style:R.textContainer,children:[(0,f.jsx)(d.A,{style:[R.title,{color:r.color}],children:n}),i&&(0,f.jsx)(d.A,{style:R.subtitle,children:i})]})]})}),R=g.A.create({container:{flexDirection:"row",alignItems:"center",padding:S.Kz.md,borderRadius:S.Z6.md,marginVertical:S.Kz.sm},iconContainer:{marginRight:S.Kz.md},icon:{fontSize:24},textContainer:{flex:1},title:{fontSize:v.o.fontSize.h3,fontFamily:v.o.fontFamily.semiBold,marginBottom:S.Kz.xs},subtitle:{fontSize:v.o.fontSize.bodySmall,fontFamily:v.o.fontFamily.regular,color:b.J.body,lineHeight:v.o.lineHeight.bodySmall}});var V=n(6925),B=n(4907),D=n(5777),T=n(9670);const K=e=>{let{onScanComplete:t,onClose:n}=e;const i="dark"===(0,a.A)()?b.J.dark:b.J.light,[r,u]=(0,o.useState)(""),[g,m]=(0,o.useState)([]),[y,h]=(0,o.useState)(!1),[A,p]=(0,o.useState)(!1),[x,v]=(0,o.useState)({isOnline:!0,quality:0}),S=D.A.getInstance(),w=T.A.getInstance(),z=(0,o.useRef)();(0,o.useEffect)(()=>{const e=async()=>{const e=w.isOnline(),t=await w.getNetworkQuality();v({isOnline:e,quality:t.score})};e();const t=()=>{e()};return w.on("online",t),w.on("offline",t),()=>{w.off("online",t),w.off("offline",t)}},[w]);const j=(0,o.useCallback)(async e=>{h(!0);try{const t=await S.searchCachedFoods(e);m(t)}catch(t){console.error("Search failed:",t),l.A.alert("Search Error","Failed to search cached foods. Please try again.")}finally{h(!1)}},[S]);(0,o.useEffect)(()=>(r.trim().length>=2?(z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{j(r)},500)):m([]),()=>{z.current&&clearTimeout(z.current)}),[r,j]);const C=async e=>{p(!0);try{const i=await(async e=>{const t={overallSafety:"caution",flaggedIngredients:[],conditionWarnings:[],safeAlternatives:[],explanation:"Offline analysis - limited data available. Please check online for complete analysis.",dataSource:"Offline Cache",lastUpdated:new Date},n=[{ingredient:"gluten",conditions:["gluten","ibs-fodmap"]},{ingredient:"lactose",conditions:["lactose"]},{ingredient:"fructose",conditions:["ibs-fodmap"]},{ingredient:"sorbitol",conditions:["ibs-fodmap"]},{ingredient:"mannitol",conditions:["ibs-fodmap"]},{ingredient:"histamine",conditions:["histamine"]},{ingredient:"tyramine",conditions:["histamine"]},{ingredient:"sulfites",conditions:["additives"]},{ingredient:"msg",conditions:["additives"]},{ingredient:"artificial colors",conditions:["additives"]},{ingredient:"artificial flavors",conditions:["additives"]}];for(const i of n)e.ingredients.some(e=>e.toLowerCase().includes(i.ingredient))&&(t.flaggedIngredients.push({ingredient:i.ingredient,reason:"Contains ".concat(i.ingredient," which may trigger symptoms"),severity:"moderate",condition:i.conditions[0]}),t.conditionWarnings.push({ingredient:i.ingredient,severity:"moderate",condition:i.conditions[0]}));return 0===t.flaggedIngredients.length?(t.overallSafety="safe",t.explanation="No common triggers detected in offline analysis."):t.flaggedIngredients.length>2&&(t.overallSafety="avoid",t.explanation="Multiple potential triggers detected. Consider avoiding or checking online for detailed analysis."),t.flaggedIngredients.length>0&&(t.safeAlternatives=["Check online for detailed alternatives","Consult with healthcare provider","Try small portion first"]),{id:"offline_".concat(Date.now()),foodItem:e,analysis:t,timestamp:new Date,userFeedback:"accurate"}})(e);await S.storeOfflineScan(i),t(i),l.A.alert("Scan Complete","Food analyzed offline. Results will be synced when online.",[{text:"OK",onPress:n}])}catch(i){console.error("Analysis failed:",i),l.A.alert("Analysis Error","Failed to analyze food. Please try again.")}finally{p(!1)}},F=()=>{l.A.prompt("Manual Food Entry","Enter the food name:",[{text:"Cancel",style:"cancel"},{text:"Analyze",onPress:async e=>{if(e&&e.trim()){const t={id:"manual_".concat(Date.now()),name:e.trim(),brand:"Unknown",category:"Unknown",barcode:"0000000000000",ingredients:[e.trim()],allergens:[],additives:[],glutenFree:!1,lactoseFree:!1,histamineLevel:"moderate",dataSource:"Manual Entry"};await C(t)}}}])};return(0,f.jsxs)(s.A,{style:[k.container,{backgroundColor:i.background}],children:[(0,f.jsxs)(s.A,{style:k.header,children:[(0,f.jsx)(d.A,{style:[k.title,{color:i.text}],children:"Offline Scanner"}),(0,f.jsx)(c.A,{onPress:n,style:k.closeButton,children:(0,f.jsx)(d.A,{style:[k.closeButtonText,{color:i.accent}],children:"\u2715"})})]}),(0,f.jsxs)(s.A,{style:[k.networkStatus,{backgroundColor:i.surface}],children:[(0,f.jsxs)(s.A,{style:k.networkInfo,children:[(0,f.jsx)(d.A,{style:[k.networkStatusText,{color:i.text}],children:x.isOnline?"\ud83d\udfe2 Online":"\ud83d\udd34 Offline"}),(0,f.jsxs)(d.A,{style:[k.networkQualityText,{color:i.textSecondary}],children:["Quality: ",x.quality,"%"]})]}),(0,f.jsx)(d.A,{style:[k.offlineNote,{color:i.textSecondary}],children:"Searching cached foods only"})]}),(0,f.jsxs)(s.A,{style:[k.searchContainer,{backgroundColor:i.surface}],children:[(0,f.jsx)(V.A,{style:[k.searchInput,{color:i.text,borderColor:i.border}],placeholder:"Search cached foods...",placeholderTextColor:i.textSecondary,value:r,onChangeText:u,returnKeyType:"search"}),y&&(0,f.jsx)(d.A,{style:[k.searchingText,{color:i.textSecondary}],children:"Searching..."})]}),(0,f.jsx)(s.A,{style:k.manualEntryContainer,children:(0,f.jsx)(c.A,{style:[k.manualEntryButton,{backgroundColor:i.accent}],onPress:F,children:(0,f.jsx)(d.A,{style:[k.manualEntryButtonText,{color:b.J.white}],children:"+ Manual Entry"})})}),(0,f.jsxs)(B.A,{style:k.resultsContainer,children:[0===g.length&&r.length>=2&&!y&&(0,f.jsxs)(s.A,{style:k.noResults,children:[(0,f.jsxs)(d.A,{style:[k.noResultsText,{color:i.textSecondary}],children:['No cached foods found for "',r,'"']}),(0,f.jsx)(c.A,{style:[k.manualEntryButton,{backgroundColor:i.accent}],onPress:F,children:(0,f.jsx)(d.A,{style:[k.manualEntryButtonText,{color:b.J.white}],children:"Add Manually"})})]}),g.map(e=>(0,f.jsxs)(c.A,{style:[k.foodItem,{backgroundColor:i.surface,borderColor:i.border}],onPress:()=>C(e),disabled:A,children:[(0,f.jsxs)(s.A,{style:k.foodInfo,children:[(0,f.jsx)(d.A,{style:[k.foodName,{color:i.text}],children:e.name}),e.brand&&(0,f.jsx)(d.A,{style:[k.foodBrand,{color:i.textSecondary}],children:e.brand}),(0,f.jsx)(d.A,{style:[k.foodCategory,{color:i.textSecondary}],children:e.category})]}),(0,f.jsx)(s.A,{style:k.foodActions,children:(0,f.jsx)(d.A,{style:[k.analyzeText,{color:i.accent}],children:A?"Analyzing...":"Analyze"})})]},e.id))]}),(0,f.jsx)(s.A,{style:[k.offlineNotice,{backgroundColor:i.surface}],children:(0,f.jsx)(d.A,{style:[k.offlineNoticeText,{color:i.textSecondary}],children:"\u26a0\ufe0f Offline mode: Limited analysis available. Full analysis requires internet connection."})})]})},k=g.A.create({container:{flex:1},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:S.Kz.lg,paddingVertical:S.Kz.md},title:{fontSize:v.o.fontSize.h2,fontFamily:v.o.fontFamily.bold},closeButton:{padding:S.Kz.xs},closeButtonText:{fontSize:24,fontFamily:v.o.fontFamily.bold},networkStatus:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:S.Kz.lg,paddingVertical:S.Kz.sm,marginHorizontal:S.Kz.lg,borderRadius:S.Z6.md},networkInfo:{flexDirection:"row",alignItems:"center",gap:S.Kz.sm},networkStatusText:{fontSize:v.o.fontSize.body,fontFamily:v.o.fontFamily.semiBold},networkQualityText:{fontSize:v.o.fontSize.bodySmall,fontFamily:v.o.fontFamily.regular},offlineNote:{fontSize:v.o.fontSize.caption,fontFamily:v.o.fontFamily.regular},searchContainer:{paddingHorizontal:S.Kz.lg,paddingVertical:S.Kz.md},searchInput:{borderWidth:1,borderRadius:S.Z6.md,paddingHorizontal:S.Kz.md,paddingVertical:S.Kz.sm,fontSize:v.o.fontSize.body,fontFamily:v.o.fontFamily.regular},searchingText:{fontSize:v.o.fontSize.bodySmall,fontFamily:v.o.fontFamily.regular,textAlign:"center",marginTop:S.Kz.sm},manualEntryContainer:{paddingHorizontal:S.Kz.lg,paddingBottom:S.Kz.md},manualEntryButton:{paddingHorizontal:S.Kz.lg,paddingVertical:S.Kz.sm,borderRadius:S.Z6.md,alignItems:"center"},manualEntryButtonText:{fontSize:v.o.fontSize.body,fontFamily:v.o.fontFamily.semiBold},resultsContainer:{flex:1,paddingHorizontal:S.Kz.lg},noResults:{alignItems:"center",paddingVertical:S.Kz.xl},noResultsText:{fontSize:v.o.fontSize.body,fontFamily:v.o.fontFamily.regular,textAlign:"center",marginBottom:S.Kz.md},foodItem:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:S.Kz.md,marginBottom:S.Kz.sm,borderRadius:S.Z6.md,borderWidth:1},foodInfo:{flex:1},foodName:{fontSize:v.o.fontSize.body,fontFamily:v.o.fontFamily.semiBold,marginBottom:S.Kz.xs},foodBrand:{fontSize:v.o.fontSize.bodySmall,fontFamily:v.o.fontFamily.regular,marginBottom:S.Kz.xs},foodCategory:{fontSize:v.o.fontSize.caption,fontFamily:v.o.fontFamily.regular},foodActions:{alignItems:"center"},analyzeText:{fontSize:v.o.fontSize.bodySmall,fontFamily:v.o.fontFamily.semiBold},offlineNotice:{paddingHorizontal:S.Kz.lg,paddingVertical:S.Kz.sm,marginHorizontal:S.Kz.lg,marginBottom:S.Kz.md,borderRadius:S.Z6.md},offlineNoticeText:{fontSize:v.o.fontSize.caption,fontFamily:v.o.fontFamily.regular,textAlign:"center"}});var N=n(5938),O=n(4796),I=n(2684);const J=()=>{const e=(0,x.cq)(),t="dark"===(0,a.A)()?b.J.dark:b.J.light,[n,g]=(0,o.useState)(null),[m,y]=(0,o.useState)(!1),[h,v]=(0,o.useState)(null),[S,z]=(0,o.useState)(!0),[C,R]=(0,o.useState)(!1),[V,B]=(0,o.useState)(0),k=I.A.getInstance(),J=D.A.getInstance(),H=T.A.getInstance(),q=(0,o.useRef)(new r.A.Value(0)).current,E=(0,o.useRef)(new r.A.Value(1)).current,Z=(0,o.useRef)(new r.A.Value(1)).current,L=(0,o.useRef)(new r.A.Value(0)).current,W=(0,o.useRef)(new r.A.Value(0)).current;(0,o.useEffect)(()=>{O.A.initialize(),k.initialize(),J.initialize();const e=async()=>{const e=H.isOnline(),t=await H.getNetworkQuality();z(e),B(t.score)};e();const t=()=>{e()};H.on("online",t),H.on("offline",t);const n=r.A.loop(r.A.sequence([r.A.timing(q,{toValue:1,duration:2e3,useNativeDriver:!0}),r.A.timing(q,{toValue:0,duration:2e3,useNativeDriver:!0})]));n.start();const i=r.A.loop(r.A.sequence([r.A.timing(E,{toValue:1.1,duration:1e3,useNativeDriver:!0}),r.A.timing(E,{toValue:1,duration:1e3,useNativeDriver:!0})]));return i.start(),()=>{H.off("online",t),H.off("offline",t),n.stop(),i.stop()}},[k,H,J,E,q]),(0,o.useEffect)(()=>{Q()},[]);const Q=async()=>{const{status:e}=await A.requestCameraPermissionsAsync();g("granted"===e)};return null===n?(0,f.jsx)(s.A,{style:P.container,children:(0,f.jsx)(p.A,{colors:b.J.primaryGradient,style:P.gradientContainer,children:(0,f.jsxs)(j,{style:P.permissionCard,children:[(0,f.jsx)(s.A,{style:P.permissionIconContainer,children:(0,f.jsx)(d.A,{style:P.permissionIcon,children:"\ud83d\udcf7"})}),(0,f.jsx)(d.A,{style:P.permissionTitle,children:"Camera Permission Required"}),(0,f.jsx)(d.A,{style:P.permissionText,children:"GutSafe needs camera access to scan barcodes and menus for your gut health."}),(0,f.jsx)(w.Q,{title:"Grant Permission",onPress:Q,size:"large",variant:"primary",style:P.permissionButton})]})})}):!1===n?(0,f.jsx)(s.A,{style:P.container,children:(0,f.jsx)(p.A,{colors:b.J.primaryGradient,style:P.gradientContainer,children:(0,f.jsxs)(j,{style:P.permissionCard,children:[(0,f.jsx)(s.A,{style:P.permissionIconContainer,children:(0,f.jsx)(d.A,{style:P.permissionIcon,children:"\u274c"})}),(0,f.jsx)(d.A,{style:P.permissionTitle,children:"Camera Access Denied"}),(0,f.jsx)(d.A,{style:P.permissionText,children:"Please enable camera access in your device settings to use the scanner."}),(0,f.jsx)(w.Q,{title:"Try Again",onPress:Q,size:"large",variant:"outline",style:P.permissionButton})]})})}):(0,f.jsxs)(s.A,{style:P.container,children:[(0,f.jsx)(s.A,{style:P.camera,children:(0,f.jsxs)(s.A,{style:P.overlay,children:[(0,f.jsxs)(p.A,{colors:["rgba(0,0,0,0.7)","transparent"],style:P.topOverlay,children:[(0,f.jsx)(s.A,{style:P.topHeader,children:(0,f.jsx)(c.A,{style:[P.closeButton,{backgroundColor:t.surface}],onPress:()=>e.goBack(),children:(0,f.jsx)(d.A,{style:[P.closeButtonText,{color:t.text}],children:"\u2715"})})}),(0,f.jsx)(d.A,{style:P.overlayTitle,children:"Scan Barcode"}),(0,f.jsx)(d.A,{style:P.overlaySubtitle,children:"Point your camera at a barcode or menu item"}),(0,f.jsxs)(s.A,{style:P.networkStatusContainer,children:[(0,f.jsx)(d.A,{style:P.networkStatusText,children:S?"\ud83d\udfe2 Online":"\ud83d\udd34 Offline"}),(0,f.jsxs)(d.A,{style:P.networkQualityText,children:["Quality: ",V,"%"]})]}),(0,f.jsxs)(s.A,{style:P.buttonRow,children:[(0,f.jsx)(c.A,{style:P.historyButton,onPress:()=>e.navigate("ScanHistory"),children:(0,f.jsx)(d.A,{style:P.historyButtonText,children:"View History"})}),!S&&(0,f.jsx)(c.A,{style:P.offlineButton,onPress:()=>R(!0),children:(0,f.jsx)(d.A,{style:P.offlineButtonText,children:"Offline Search"})})]})]}),(0,f.jsxs)(s.A,{style:P.scanFrame,children:[(0,f.jsx)(s.A,{style:P.scanFrameCorner}),(0,f.jsx)(s.A,{style:[P.scanFrameCorner,P.topRight]}),(0,f.jsx)(s.A,{style:[P.scanFrameCorner,P.bottomLeft]}),(0,f.jsx)(s.A,{style:[P.scanFrameCorner,P.bottomRight]}),(0,f.jsx)(r.A.View,{style:[P.scanLine,{transform:[{translateY:q.interpolate({inputRange:[0,1],outputRange:[0,200]})}]}]})]}),(0,f.jsx)(p.A,{colors:["transparent","rgba(0,0,0,0.7)"],style:P.bottomOverlay,children:(0,f.jsx)(s.A,{style:P.scanButtonContainer,children:(0,f.jsx)(r.A.View,{style:{transform:[{scale:r.A.multiply(E,Z)},{rotateY:L.interpolate({inputRange:[0,1],outputRange:["0deg","360deg"]})}]},children:(0,f.jsx)(c.A,(0,i.A)((0,i.A)({style:P.scanButton,onPress:()=>{N.n.buttonPress(),y(!1),v(null),r.A.parallel([r.A.spring(Z,{toValue:1,useNativeDriver:!0}),r.A.timing(W,{toValue:0,duration:300,useNativeDriver:!0})]).start()},disabled:!m},O.A.createButtonConfig(m?"Scan Again Button":"Scanning in Progress",m?"Start a new scan":"Camera is ready to scan barcodes",!m,!1)),{},{children:(0,f.jsx)(p.A,{colors:m?b.J.primaryGradient:[b.J.body,b.J.body],style:P.scanButtonGradient,children:(0,f.jsx)(r.A.View,{style:{opacity:W.interpolate({inputRange:[0,1],outputRange:[1,.8]})},children:(0,f.jsx)(d.A,{style:P.scanButtonText,children:m?"Scan Again":"Scanning..."})})})}))})})})]})}),h&&(0,f.jsx)(s.A,{style:P.resultContainer,children:(0,f.jsx)(F,{result:h,title:"safe"===h?"Safe to Eat":"Use Caution",subtitle:"safe"===h?"This food appears safe for your gut health profile.":"This food may contain ingredients that could trigger symptoms."})}),(0,f.jsx)(u.A,{visible:C,animationType:"slide",presentationStyle:"pageSheet",onRequestClose:()=>R(!1),children:(0,f.jsx)(K,{onScanComplete:t=>{R(!1),v(t.analysis.overallSafety),l.A.alert("Offline Scan Complete","Food: ".concat(t.foodItem.name,"\nResult: ").concat(t.analysis.overallSafety.toUpperCase(),"\n\nThis scan will be synced when online."),[{text:"OK",onPress:()=>y(!1)},{text:"View History",onPress:()=>e.navigate("ScanHistory")}])},onClose:()=>R(!1)})})]})},P=g.A.create({container:{flex:1,backgroundColor:b.J.background},gradientContainer:{flex:1,justifyContent:"center",alignItems:"center"},camera:{flex:1},overlay:{flex:1},topOverlay:{paddingTop:60,paddingHorizontal:S.Kz.lg,paddingBottom:S.Kz.xl},topHeader:{flexDirection:"row",justifyContent:"flex-end",marginBottom:S.Kz.lg},closeButton:{width:32,height:32,borderRadius:16,alignItems:"center",justifyContent:"center"},closeButtonText:{fontSize:v.o.fontSize.body,fontFamily:v.o.fontFamily.semiBold},overlayTitle:{fontSize:v.o.fontSize.h2,fontFamily:v.o.fontFamily.bold,color:b.J.white,textAlign:"center",marginBottom:S.Kz.sm,textShadowColor:"rgba(0, 0, 0, 0.5)",textShadowOffset:{width:0,height:1},textShadowRadius:2},overlaySubtitle:{fontSize:v.o.fontSize.body,fontFamily:v.o.fontFamily.regular,color:b.J.white,textAlign:"center",opacity:.9,marginBottom:S.Kz.md},networkStatusContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",gap:S.Kz.sm,marginBottom:S.Kz.md},networkStatusText:{fontSize:v.o.fontSize.bodySmall,fontFamily:v.o.fontFamily.semiBold,color:b.J.white},networkQualityText:{fontSize:v.o.fontSize.caption,fontFamily:v.o.fontFamily.regular,color:b.J.white,opacity:.8},buttonRow:{flexDirection:"row",justifyContent:"center",gap:S.Kz.sm},historyButton:{backgroundColor:"rgba(255, 255, 255, 0.2)",paddingHorizontal:S.Kz.md,paddingVertical:S.Kz.sm,borderRadius:S.Z6.md},historyButtonText:{fontSize:v.o.fontSize.bodySmall,fontFamily:v.o.fontFamily.semiBold,color:b.J.white,textAlign:"center"},offlineButton:{backgroundColor:"rgba(255, 165, 0, 0.3)",paddingHorizontal:S.Kz.md,paddingVertical:S.Kz.sm,borderRadius:S.Z6.md,borderWidth:1,borderColor:"rgba(255, 165, 0, 0.5)"},offlineButtonText:{fontSize:v.o.fontSize.bodySmall,fontFamily:v.o.fontFamily.semiBold,color:b.J.white,textAlign:"center"},scanFrame:{position:"absolute",top:"50%",left:"50%",marginTop:-100,marginLeft:-100,width:200,height:200},scanFrameCorner:(0,i.A)({position:"absolute",width:30,height:30,borderColor:b.J.primary,borderWidth:3},"web"===m.A.OS?{boxShadow:"0 0 4px ".concat(b.J.primary,"80")}:{shadowColor:b.J.primary,shadowOffset:{width:0,height:0},shadowOpacity:.8,shadowRadius:4,elevation:4}),topRight:{top:0,right:0,borderTopRightRadius:S.Z6.sm,borderLeftWidth:0,borderBottomWidth:0},bottomLeft:{bottom:0,left:0,borderBottomLeftRadius:S.Z6.sm,borderTopWidth:0,borderRightWidth:0},bottomRight:{bottom:0,right:0,borderBottomRightRadius:S.Z6.sm,borderTopWidth:0,borderLeftWidth:0},scanLine:(0,i.A)({position:"absolute",left:0,right:0,height:2,backgroundColor:b.J.primary},"web"===m.A.OS?{boxShadow:"0 0 4px ".concat(b.J.primary)}:{shadowColor:b.J.primary,shadowOffset:{width:0,height:0},shadowOpacity:1,shadowRadius:4,elevation:4}),bottomOverlay:{position:"absolute",bottom:0,left:0,right:0,paddingBottom:50,paddingHorizontal:S.Kz.lg},scanButtonContainer:{alignItems:"center"},scanButton:(0,i.A)({width:120,height:120,borderRadius:60,overflow:"hidden"},"web"===m.A.OS?{boxShadow:"0 8px 16px ".concat(b.J.primary,"4D")}:{shadowColor:b.J.primary,shadowOffset:{width:0,height:8},shadowOpacity:.3,shadowRadius:16,elevation:8}),scanButtonGradient:{flex:1,alignItems:"center",justifyContent:"center"},scanButtonIcon:{fontSize:24,marginBottom:S.Kz.xs},scanButtonText:{fontSize:v.o.fontSize.bodySmall,fontFamily:v.o.fontFamily.semiBold,color:b.J.white,textAlign:"center"},permissionCard:{margin:S.Kz.lg,alignItems:"center",padding:S.Kz.xl},permissionIconContainer:{width:80,height:80,borderRadius:40,backgroundColor:"rgba(255, 255, 255, 0.2)",alignItems:"center",justifyContent:"center",marginBottom:S.Kz.lg},permissionIcon:{fontSize:32},permissionTitle:{fontSize:v.o.fontSize.h2,fontFamily:v.o.fontFamily.bold,color:b.J.white,textAlign:"center",marginBottom:S.Kz.md},permissionText:{fontSize:v.o.fontSize.body,fontFamily:v.o.fontFamily.regular,color:b.J.white,textAlign:"center",lineHeight:v.o.lineHeight.body,marginBottom:S.Kz.lg,opacity:.8},permissionButton:{minWidth:200},buttonIcon:{fontSize:16,marginRight:S.Kz.sm},resultContainer:{position:"absolute",bottom:200,left:S.Kz.lg,right:S.Kz.lg}})}}]);
//# sourceMappingURL=112.e17ad7fa.chunk.js.map